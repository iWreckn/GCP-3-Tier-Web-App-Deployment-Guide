# ğŸ—ï¸ Module 1: Manual Deployment Guide - 3-Tier Network Architecture

> **A comprehensive guide to manually deploying a secure 3-tier network architecture in Google Cloud Platform**

---

## ğŸ“‹ Overview

We'll be creating a production-ready network foundation with:

- **Custom VPC** with three isolated subnets
- **ğŸŒ Web Tier** (`10.0.1.0/24`) - Public-facing layer
- **âš™ï¸ App Tier** (`10.0.2.0/24`) - Application logic layer  
- **ğŸ—„ï¸ Data Tier** (`10.0.3.0/24`) - Database layer
- **ğŸ”¥ Firewall Rules** - Secure communication between tiers

> ğŸ’¡ Each step corresponds directly to the resources defined in your `main.tf` file, making this perfect for learning before automation.

---

## ğŸš€ Part 1: Create the Custom VPC

> ğŸ“¦ **Foundation Layer**: This creates your main container - the `google_compute_network` resource.

### Step 1: Navigate to VPC Networks

1. In the GCP Console, click the **Navigation menu (â˜°)** in the top-left
2. Navigate to: `VPC network` â†’ `VPC networks`

### Step 2: Create the VPC

1. Click **CREATE VPC NETWORK** at the top
2. Configure the following:
   ```
   Name: my-app-vpc
   Subnet creation mode: Custom
   ```
   
   > âš ï¸ **Critical Security Step**: Selecting "Custom" is equivalent to `auto_create_subnetworks = false` in Terraform

3. Leave remaining settings as default

### Step 3: Create the Subnets (The Three Tiers)

While still on the "Create a VPC network" page, add each subnet:

#### ğŸŒ Subnet 1: Web Tier
- In the **Subnets** section, click **ADD SUBNET**
- Configure:
  ```
  Name: web-subnet
  Region: us-central1
  IPv4 range: 10.0.1.0/24
  ```
- Click **Done**

#### âš™ï¸ Subnet 2: App Tier
- Click **ADD SUBNET** again
- Configure:
  ```
  Name: app-subnet
  Region: us-central1
  IPv4 range: 10.0.2.0/24
  ```
- Click **Done**

#### ğŸ—„ï¸ Subnet 3: Data Tier
- Click **ADD SUBNET** one more time
- Configure:
  ```
  Name: data-subnet
  Region: us-central1
  IPv4 range: 10.0.3.0/24
  ```
- Click **Done**

### Step 4: Finalize VPC Creation

1. Scroll to the bottom and click **Create**
2. â±ï¸ Allow 1-2 minutes for provisioning

---

## ğŸ”¥ Part 2: Implement Firewall Rules

> ğŸ›¡ï¸ **Security Layer**: Building secure communication channels - the `google_compute_firewall` resources.

### Navigate to Firewall
- In the Navigation menu (â˜°), go to: `VPC network` â†’ `Firewall`

---

### ğŸŒ Rule 1: Allow Public HTTP/HTTPS to Web Tier

> **ğŸ”“ Security Significance**: This is your public gateway - the **only rule** that allows traffic from the entire internet (`0.0.0.0/0`). It enables users to access your website/application through standard web ports.
> 
> - **Port 80**: HTTP traffic (unencrypted)
> - **Port 443**: HTTPS traffic (encrypted, preferred)  
> - **Target**: Only affects servers tagged `web-server`

**Resource**: `allow-http-https-web`

#### Configuration:
1. Click **CREATE FIREWALL RULE**
2. Configure:
   ```
   Name: allow-http-https-web
   Network: my-app-vpc
   Direction of traffic: Ingress
   Priority: 1000
   Targets: Specified target tags
   Target tags: web-server
   Source filter: IPv4 ranges
   Source IPv4 ranges: 0.0.0.0/0
   ```
3. **Protocols and ports**:
   - Select **Specified protocols and ports**
   - Check **TCP**
   - Enter: `80, 443`
4. Click **Create**

---

### ğŸ” Rule 2: Allow SSH to Web Tier

> **âš ï¸ Security Significance**: This is your administrative access to web servers. It's necessary for management but creates a security risk.
>
> - **Port 22**: SSH (Secure Shell) for remote server access
> - **âš ï¸ Risk**: Currently open to the world - major security vulnerability!
> - **ğŸ”’ Best Practice**: Restrict to your office IP or VPN range in production

**Resource**: `allow-ssh-web`

#### Configuration:
1. Click **CREATE FIREWALL RULE**
2. Configure:
   ```
   Name: allow-ssh-web
   Network: my-app-vpc
   Direction of traffic: Ingress
   Priority: 1001
   Targets: Specified target tags
   Target tags: web-server
   Source filter: IPv4 ranges
   Source IPv4 ranges: 0.0.0.0/0
   ```
   
   > ğŸš¨ **Production Note**: Lock this down to specific IP ranges once we have IP addresses!

3. **Protocols and ports**:
   - Select **Specified protocols and ports**
   - Check **TCP**
   - Enter: `22`
4. Click **Create**

---

### ğŸ”„ Rule 3: Allow Web Tier to App Tier

> **ğŸ”’ Security Significance**: This implements tier isolation - web servers can talk to app servers, but nothing else can.
>
> - **Port 3000**: Common Node.js/Express application port
> - **Source Tags**: Only `web-server` tagged instances can initiate this connection
> - **Zero Trust**: App servers are completely isolated from the internet

**Resource**: `allow-web-to-app`

#### Configuration:
1. Click **CREATE FIREWALL RULE**
2. Configure:
   ```
   Name: allow-web-to-app
   Network: my-app-vpc
   Direction of traffic: Ingress
   Priority: 1002
   Targets: Specified target tags
   Target tags: app-server
   Source filter: Source tags
   Source tags: web-server
   ```
3. **Protocols and ports**:
   - Select **Specified protocols and ports**
   - Check **TCP**
   - Enter: `3000`
4. Click **Create**

---

### ğŸ—ƒï¸ Rule 4: Allow App Tier to Data Tier

> **ğŸ” Security Significance**: This is your database protection layer - only application servers can reach the database.
>
> - **Port 5432**: PostgreSQL database port
> - **Source Tags**: Only `app-server` tagged instances can connect
> - **Maximum Security**: Database tier has no internet access whatsoever

**Resource**: `allow-app-to-db`

#### Configuration:
1. Click **CREATE FIREWALL RULE**
2. Configure:
   ```
   Name: allow-app-to-db
   Network: my-app-vpc
   Direction of traffic: Ingress
   Priority: 1003
   Targets: Specified target tags
   Target tags: db-server
   Source filter: Source tags
   Source tags: app-server
   ```
3. **Protocols and ports**:
   - Select **Specified protocols and ports**
   - Check **TCP**
   - Enter: `5432`
4. Click **Create**

> ğŸ”‘ **Key Principle**: Each tier can only communicate with the next tier, creating a secure "chain of trust" that prevents lateral movement if one layer is compromised.

---

## âœ… Final Verification

### ğŸ” VPC Verification
- [ ] Navigate to **VPC Networks**
- [ ] Confirm `my-app-vpc` is listed and active

### ğŸŒ Subnet Verification
- [ ] Click on `my-app-vpc`
- [ ] Verify all three subnets exist with correct IP ranges:
  - `web-subnet` â†’ `10.0.1.0/24`
  - `app-subnet` â†’ `10.0.2.0/24`  
  - `data-subnet` â†’ `10.0.3.0/24`

### ğŸ”¥ Firewall Rules Verification
- [ ] Navigate to **Firewall** page
- [ ] Filter by network: `my-app-vpc`
- [ ] Confirm all four rules are present:
  - `allow-http-https-web`
  - `allow-ssh-web`
  - `allow-web-to-app`
  - `allow-app-to-db`
- [ ] Click into each rule to verify source/target tags and ports

---

## ğŸ¯ Architecture Summary

```
                             Internet
                                â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                    my-app-vpc                           â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚  Web Tier   â”‚â”€â”€â”€â–¶â”‚   App Tier  â”‚â”€â”€â”€â–¶â”‚  Data Tier  â”‚  â”‚
    â”‚  â”‚ 10.0.1.0/24 â”‚    â”‚ 10.0.2.0/24 â”‚    â”‚ 10.0.3.0/24 â”‚  â”‚
    â”‚  â”‚   :80,443   â”‚    â”‚    :3000    â”‚    â”‚    :5432    â”‚  â”‚
    â”‚  â”‚    :22      â”‚    â”‚             â”‚    â”‚             â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Security Configuration Summary

| Firewall Rule | Source | Target | Ports | Purpose |
|---------------|--------|--------|-------|---------|
| `allow-http-https-web` | Internet (`0.0.0.0/0`) | `web-server` | 80, 443 | Public web access |
| `allow-ssh-web` | Internet (`0.0.0.0/0`) | `web-server` | 22 | Administrative access |
| `allow-web-to-app` | `web-server` tag | `app-server` tag | 3000 | Tier-to-tier communication |
| `allow-app-to-db` | `app-server` tag | `db-server` tag | 5432 | Database access |

---

## ğŸ§  Learning Outcomes

After completing this module, you will understand:

- âœ… **Network Segmentation**: How to isolate application tiers
- âœ… **Firewall Configuration**: Creating secure communication paths
- âœ… **Tag-Based Security**: Using network tags for access control
- âœ… **Defense in Depth**: Layered security approach
- âœ… **Zero Trust Principles**: Explicit permission for each connection

---

## ğŸ”„ Next Steps

Now that you've manually built the network foundation:

1. **ğŸš€ Deploy compute instances** in each tier (Module 2)
2. **ğŸ’¾ Add a secure database** (Module 3) 
3. **ğŸ¤– Automate everything** with Terraform

---

## ğŸ·ï¸ Tags

`#GoogleCloud` `#VPC` `#NetworkSecurity` `#3TierArchitecture` `#Firewall` `#Infrastructure`

---

<div align="center">
  <strong>ğŸ”§ This guide corresponds directly to your Terraform configuration and can be used for learning, testing, or emergency manual deployments.</strong>
</div># ğŸ—ï¸ Module 1: Manual Deployment Guide - 3-Tier Network Architecture

> **A comprehensive guide to manually deploying a secure 3-tier network architecture in Google Cloud Platform**

---

## ğŸ“‹ Overview

We'll be creating a production-ready network foundation with:

- **Custom VPC** with three isolated subnets
- **ğŸŒ Web Tier** (`10.0.1.0/24`) - Public-facing layer
- **âš™ï¸ App Tier** (`10.0.2.0/24`) - Application logic layer  
- **ğŸ—„ï¸ Data Tier** (`10.0.3.0/24`) - Database layer
- **ğŸ”¥ Firewall Rules** - Secure communication between tiers

> ğŸ’¡ Each step corresponds directly to the resources defined in your `main.tf` file, making this perfect for learning before automation.

---

## ğŸš€ Part 1: Create the Custom VPC

> ğŸ“¦ **Foundation Layer**: This creates your main container - the `google_compute_network` resource.

### Step 1: Navigate to VPC Networks

1. In the GCP Console, click the **Navigation menu (â˜°)** in the top-left
2. Navigate to: `VPC network` â†’ `VPC networks`

### Step 2: Create the VPC

1. Click **CREATE VPC NETWORK** at the top
2. Configure the following:
   ```
   Name: my-app-vpc
   Subnet creation mode: Custom
   ```
   
   > âš ï¸ **Critical Security Step**: Selecting "Custom" is equivalent to `auto_create_subnetworks = false` in Terraform

3. Leave remaining settings as default

### Step 3: Create the Subnets (The Three Tiers)

While still on the "Create a VPC network" page, add each subnet:

#### ğŸŒ Subnet 1: Web Tier
- In the **Subnets** section, click **ADD SUBNET**
- Configure:
  ```
  Name: web-subnet
  Region: us-central1
  IPv4 range: 10.0.1.0/24
  ```
- Click **Done**

#### âš™ï¸ Subnet 2: App Tier
- Click **ADD SUBNET** again
- Configure:
  ```
  Name: app-subnet
  Region: us-central1
  IPv4 range: 10.0.2.0/24
  ```
- Click **Done**

#### ğŸ—„ï¸ Subnet 3: Data Tier
- Click **ADD SUBNET** one more time
- Configure:
  ```
  Name: data-subnet
  Region: us-central1
  IPv4 range: 10.0.3.0/24
  ```
- Click **Done**

### Step 4: Finalize VPC Creation

1. Scroll to the bottom and click **Create**
2. â±ï¸ Allow 1-2 minutes for provisioning

---

## ğŸ”¥ Part 2: Implement Firewall Rules

> ğŸ›¡ï¸ **Security Layer**: Building secure communication channels - the `google_compute_firewall` resources.

### Navigate to Firewall
- In the Navigation menu (â˜°), go to: `VPC network` â†’ `Firewall`

---

### ğŸŒ Rule 1: Allow Public HTTP/HTTPS to Web Tier

> **ğŸ”“ Security Significance**: This is your public gateway - the **only rule** that allows traffic from the entire internet (`0.0.0.0/0`). It enables users to access your website/application through standard web ports.
> 
> - **Port 80**: HTTP traffic (unencrypted)
> - **Port 443**: HTTPS traffic (encrypted, preferred)  
> - **Target**: Only affects servers tagged `web-server`

**Resource**: `allow-http-https-web`

#### Configuration:
1. Click **CREATE FIREWALL RULE**
2. Configure:
   ```
   Name: allow-http-https-web
   Network: my-app-vpc
   Direction of traffic: Ingress
   Priority: 1000
   Targets: Specified target tags
   Target tags: web-server
   Source filter: IPv4 ranges
   Source IPv4 ranges: 0.0.0.0/0
   ```
3. **Protocols and ports**:
   - Select **Specified protocols and ports**
   - Check **TCP**
   - Enter: `80, 443`
4. Click **Create**

---

### ğŸ” Rule 2: Allow SSH to Web Tier

> **âš ï¸ Security Significance**: This is your administrative access to web servers. It's necessary for management but creates a security risk.
>
> - **Port 22**: SSH (Secure Shell) for remote server access
> - **âš ï¸ Risk**: Currently open to the world - major security vulnerability!
> - **ğŸ”’ Best Practice**: Restrict to your office IP or VPN range in production

**Resource**: `allow-ssh-web`

#### Configuration:
1. Click **CREATE FIREWALL RULE**
2. Configure:
   ```
   Name: allow-ssh-web
   Network: my-app-vpc
   Direction of traffic: Ingress
   Priority: 1001
   Targets: Specified target tags
   Target tags: web-server
   Source filter: IPv4 ranges
   Source IPv4 ranges: 0.0.0.0/0
   ```
   
   > ğŸš¨ **Production Note**: Lock this down to specific IP ranges once we have IP addresses!

3. **Protocols and ports**:
   - Select **Specified protocols and ports**
   - Check **TCP**
   - Enter: `22`
4. Click **Create**

---

### ğŸ”„ Rule 3: Allow Web Tier to App Tier

> **ğŸ”’ Security Significance**: This implements tier isolation - web servers can talk to app servers, but nothing else can.
>
> - **Port 3000**: Common Node.js/Express application port
> - **Source Tags**: Only `web-server` tagged instances can initiate this connection
> - **Zero Trust**: App servers are completely isolated from the internet

**Resource**: `allow-web-to-app`

#### Configuration:
1. Click **CREATE FIREWALL RULE**
2. Configure:
   ```
   Name: allow-web-to-app
   Network: my-app-vpc
   Direction of traffic: Ingress
   Priority: 1002
   Targets: Specified target tags
   Target tags: app-server
   Source filter: Source tags
   Source tags: web-server
   ```
3. **Protocols and ports**:
   - Select **Specified protocols and ports**
   - Check **TCP**
   - Enter: `3000`
4. Click **Create**

---

### ğŸ—ƒï¸ Rule 4: Allow App Tier to Data Tier

> **ğŸ” Security Significance**: This is your database protection layer - only application servers can reach the database.
>
> - **Port 5432**: PostgreSQL database port
> - **Source Tags**: Only `app-server` tagged instances can connect
> - **Maximum Security**: Database tier has no internet access whatsoever

**Resource**: `allow-app-to-db`

#### Configuration:
1. Click **CREATE FIREWALL RULE**
2. Configure:
   ```
   Name: allow-app-to-db
   Network: my-app-vpc
   Direction of traffic: Ingress
   Priority: 1003
   Targets: Specified target tags
   Target tags: db-server
   Source filter: Source tags
   Source tags: app-server
   ```
3. **Protocols and ports**:
   - Select **Specified protocols and ports**
   - Check **TCP**
   - Enter: `5432`
4. Click **Create**

> ğŸ”‘ **Key Principle**: Each tier can only communicate with the next tier, creating a secure "chain of trust" that prevents lateral movement if one layer is compromised.

---

## âœ… Final Verification

### ğŸ” VPC Verification
- [ ] Navigate to **VPC Networks**
- [ ] Confirm `my-app-vpc` is listed and active

### ğŸŒ Subnet Verification
- [ ] Click on `my-app-vpc`
- [ ] Verify all three subnets exist with correct IP ranges:
  - `web-subnet` â†’ `10.0.1.0/24`
  - `app-subnet` â†’ `10.0.2.0/24`  
  - `data-subnet` â†’ `10.0.3.0/24`

### ğŸ”¥ Firewall Rules Verification
- [ ] Navigate to **Firewall** page
- [ ] Filter by network: `my-app-vpc`
- [ ] Confirm all four rules are present:
  - `allow-http-https-web`
  - `allow-ssh-web`
  - `allow-web-to-app`
  - `allow-app-to-db`
- [ ] Click into each rule to verify source/target tags and ports

---

## ğŸ¯ Architecture Summary

```
                             Internet
                                â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                    my-app-vpc                           â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚  Web Tier   â”‚â”€â”€â”€â–¶â”‚   App Tier  â”‚â”€â”€â”€â–¶â”‚  Data Tier  â”‚  â”‚
    â”‚  â”‚ 10.0.1.0/24 â”‚    â”‚ 10.0.2.0/24 â”‚    â”‚ 10.0.3.0/24 â”‚  â”‚
    â”‚  â”‚   :80,443   â”‚    â”‚    :3000    â”‚    â”‚    :5432    â”‚  â”‚
    â”‚  â”‚    :22      â”‚    â”‚             â”‚    â”‚             â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Security Configuration Summary

| Firewall Rule | Source | Target | Ports | Purpose |
|---------------|--------|--------|-------|---------|
| `allow-http-https-web` | Internet (`0.0.0.0/0`) | `web-server` | 80, 443 | Public web access |
| `allow-ssh-web` | Internet (`0.0.0.0/0`) | `web-server` | 22 | Administrative access |
| `allow-web-to-app` | `web-server` tag | `app-server` tag | 3000 | Tier-to-tier communication |
| `allow-app-to-db` | `app-server` tag | `db-server` tag | 5432 | Database access |

---

## ğŸ§  Learning Outcomes

After completing this module, you will understand:

- âœ… **Network Segmentation**: How to isolate application tiers
- âœ… **Firewall Configuration**: Creating secure communication paths
- âœ… **Tag-Based Security**: Using network tags for access control
- âœ… **Defense in Depth**: Layered security approach
- âœ… **Zero Trust Principles**: Explicit permission for each connection

---

## ğŸ”„ Next Steps

Now that you've manually built the network foundation:

1. **ğŸš€ Deploy compute instances** in each tier (Module 2)
2. **ğŸ’¾ Add a secure database** (Module 3) 
3. **ğŸ¤– Automate everything** with Terraform

---

## ğŸ·ï¸ Tags

`#GoogleCloud` `#VPC` `#NetworkSecurity` `#3TierArchitecture` `#Firewall` `#Infrastructure`

---

<div align="center">
  <strong>ğŸ”§ This guide corresponds directly to your Terraform configuration and can be used for learning, testing, or emergency manual deployments.</strong>
</div>